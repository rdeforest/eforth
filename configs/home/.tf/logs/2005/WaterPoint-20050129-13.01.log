Waterpoint: subtle and ponderous[301]

*** Connected ***
#$#mcp version: 2.1 to: 2.1
The Dense Forest
The trees crowd around thickly, and a heavy carpet of pine needles and broken branches cover the ground.  A park bench is here.  The day is finally surrendering to the night as the light fades to the west.  It is hot and breezy.  The forest opens up into a clearing to the south.  You hear the sounds of water from an opening to the northeast.  A dark path leads a short distance west into the woods to a large, sagging wooden structure.
Last connected Fri Jan 28 13:45:25 2005 PST from dsl081-175-009.sea1.dsl.speakeasy.net
#$#mcp-negotiate-can 1783753956 package: mcp-negotiate min-version: 1.0 max-version: 2.0
#$#mcp-negotiate-can 1783753956 package: mcp-cord min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-org-mud-moo-simpleedit min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-ping min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-widget min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-eliza min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-turtleback-browse min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-visual min-version: 1.0 max-version: 1.1
#$#mcp-negotiate-can 1783753956 package: dns-com-ben-tfstatus min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-buddy min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-status min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-att-research-twin-window min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-nowhere-hello min-version: 0.1 max-version: 0.1
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-rehash min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-ispell min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-desktop min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-edumacation-im min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-edumacation-racko min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-getset min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-displayurl min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-edumacation-update min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-jtext min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-edumacation-song min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-nop-sqmoo-objlist min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-nop-sqmoo-verblist min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-serverinfo min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-timezone min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-awns-googlewhack min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-fyigm-mypkg min-version: 1.5 max-version: 2.0
#$#mcp-negotiate-can 1783753956 package: dns-com-nop-sqmoo-verbtext min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-org-waterpoint-tellpriority min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-can 1783753956 package: dns-com-fyigm-lex min-version: 1.0 max-version: 1.0
#$#mcp-negotiate-end 1783753956
The verb :@paste is on   Pasting Feature(#212)
Pasting Feature (#212) [ readable ]
  Owned by unknown hacker (#35).
  Child of Generic Feature Object (#65).
-------------------------------- finished ---------------------------------
Pasting Feature (#212) [ readable ]
  Owned by unknown hacker (#35).
  Child of Generic Feature Object (#65).
  #212:@paste(old)              unknown hacker (#35) rxd    any any any
  #212:|*                       unknown hacker (#35) rxd    any any any
  #212:"@pasteto @paste @pasteto2" Xeric (#999)      rxd    any any any
  #212:@pasteto2(old)           unknown hacker (#35) rxd    any none none
  #212:@|                       Ben (#269)           rxd    none none none
-------------------------------- finished ---------------------------------
Usage:  @dump something [with [id=...] [noprops] [noverbs] [create]]
@building-option +create-set-co
@create $feature named Pasting Feature:Pasting Feature,paste
;_.("feature_verbs") = {"|", "@paste", "@|"}
;_.("feature_ok") = 1
;_.("commands") = {"|*", "@pasteto @paste @pasteto2", "@|"}
;_.("help_text") = "The Pasting Feature is mostly useful to people with fancy clients (such as Emacs) or who connect using a windowing system that allows them to copy text they've already seen.  It's intended to give people a way to quote verbatim text at other people in the room."
"_.("key") => E_PERM (Permission denied)
;_.("aliases") = {"Pasting Feature", "paste"}
;_.("description") = "Verbs useful to people using a windowing system to paste text at people."
;_.("unique") = 0
;_.("offered") = #-1
;_.("object_size") = {7779, 1002603771}
"_.("review_history") => E_PERM (Permission denied)

"Skipping #212:"@paste(old)"...
@verb _:"|*" any any any rxd
@program _:|
"Usage:  |message";
"";
"Echo a line prefaced by a vertical bar.";
"";
"Example:";
"  Hacker wants to echo to the room what he just saw. He enters (either by hand, or with Emacs or a windowing system):";
"      |Haakon has disconnected.";
"  The room sees:";
"      Hacker | Haakon has disconnected.";
argstr = $code_utils:argstr(verb, args);
verb[1..1] = "";
if (index(verb, " "))
  verb = tostr("\"", verb, "\"");
endif
player.location:announce_all(((((player:dnamec() + " |") + (verb ? " " | "")) + verb) + (argstr ? " " | "")) + argstr);
.

@verb _:"@pasteto @paste @pasteto2" any any any rxd #999
@program _:@pasteto
"Usage:  @paste [<victim>]";
"Usage:  @pasteto <victim>";
"Usage:  @paste to <victim>";
"";
"@paste reads lines of input and then pastes them as a block to the entire room.  The text is bracketed by lines of dashes.";
"";
"If you specify a victim, the block of text goes only to that player.  Several syntaxes are supported for backwards compatibility.";
set_task_perms(caller_perms());
if (index(verb, "to") || (length(args) >= 1))
  target = $string_utils:match_player(args[$]);
  if ($command_utils:player_match_failed(target, dobjstr))
    return;
  elseif (is_player(target) && (!$object_utils:connected(target)))
    player:tell($string_utils:pronoun_sub("The %n %<is> not connected.  Try `@qsend %n' and then paste to that.", target));
    player:tell("Now ignoring lines for @pasteto.");
    lines = $command_utils:read_lines();
    player:tell("Nothing @pasted.");
    return;
  endif
else
  target = #-1;
endif
lines = $command_utils:read_lines();
"did they disconnect?";
if ((valid(target) && is_player(target)) && (!$object_utils:connected(target)))
  player:tell($string_utils:pronoun_sub("The %n %<is> not connected anymore!  I'll @qsend that for you.", target));
  result = $mail_agent:send_message(player, {target}, "@pasteto just as you disconnected", lines);
  if (!result[1])
    player:tell("Sorry, couldn't mail your paste.  Maybe E was toaded?");
  endif
  return;
endif
"build banner";
if (valid(target))
  to_tell = {$string_utils:center("Private message from " + player:name(), 75, "-")};
else
  to_tell = {$string_utils:center((" " + player:name()) + " ", 75, "-")};
endif
to_tell = {@to_tell, @lines};
if (valid(target))
  to_tell = {@to_tell, $string_utils:center("end message", 75, "-")};
  target:tell_lines(to_tell);
  if ((verb[$] == "2") && (target != player))
    player:tell_lines(to_tell);
  endif
else
  to_tell = {@to_tell, $string_utils:center((" " + player:name()) + " stops pasting ", 75, "-")};
  for target in (player.location:contents())
    target:tell_lines(to_tell);
  endfor
endif
player:tell("Done @pasting.");
.

"Skipping #212:"@pasteto2(old)"...
@verb _:"@|" none none none rxd #269
@program _:@|
"You enter lines like @paste, but then paste them like |";
lines = $command_utils:read_lines();
res = " |";
for line in (lines)
  res = (res + " ") + $string_utils:trim(line);
endfor
player.location:announce_all(player:dnamec() + res);
.

"***finished***
